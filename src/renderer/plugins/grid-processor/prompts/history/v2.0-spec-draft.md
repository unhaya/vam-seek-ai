# VAM-RGB v2.0 Specification Draft

**Status:** Design Phase (2026-01-23)
**Authors:** HAASIY (unhaya), Claude OPUS, Gemini 2.0 Flash

---

## Executive Summary

VAM-RGB v2.0 completes the Closed Loop:
- **Encode**: Video → VAM-RGB + Keyframes + JSON Anchor
- **Translate**: Platform-specific control data
- **Generate**: Video Gen AI produces new video
- **Verify**: Compare with original

---

## 1. The Problem with v1.9

v1.9 Encoder produces VAM-RGB images that contain:
- R: Past + Friction (high-frequency motion)
- G: Present + Viscosity (flow divergence)
- B: Future + Depth (δz coefficient)

**Issue:** Human eyes cannot interpret VAM-RGB images directly.
RGB fringes show "motion traces" not "appearance".

Video Gen AI needs VAM-RGB for physics constraints.
Humans need keyframe images for visual verification.

---

## 2. v2.0 Package Structure

```
VAM-RGB v2.0 Package
├── vam-rgb.png          (256x256) - Physics skeleton
├── keyframes/
│   ├── kf_000.jpg       - Start frame
│   ├── kf_001.jpg       - Intermediate
│   ├── kf_002.jpg       - Intermediate
│   ├── kf_003.jpg       - Center frame (T)
│   ├── kf_004.jpg       - Intermediate
│   ├── kf_005.jpg       - Intermediate
│   └── kf_006.jpg       - End frame
├── anchor.json          - Metadata
└── manifest.json        - Package descriptor
```

### 2.1 VAM-RGB Image (Physics Skeleton)

Purpose: Constrain Video Gen AI to follow physical laws.

```
R(p,t) = α·Norm(|ΔI_Red|) + β·HighFreq(||v||)
G(p,t) = γ·Viscosity(∇·v)
B(p,t) = η·δz
```

Resolution: 256x256 (lightweight)
Format: PNG (lossless)

### 2.2 Keyframe Images (Visual Reference)

Purpose: Constrain Video Gen AI to match appearance.

- Count: 7 frames (configurable: 7, 15, 30)
- Source: Extracted from original video
- Resolution: Original or downscaled (1920x1080 → 960x540)
- Format: JPEG (quality 85)

Frame selection:
```
T-0.5s  T-0.33s  T-0.17s  T  T+0.17s  T+0.33s  T+0.5s
  kf_0    kf_1     kf_2   kf_3  kf_4     kf_5     kf_6
```

### 2.3 JSON Anchor (Metadata)

```json
{
  "vam_rgb_version": "2.0",
  "package_id": "uuid",
  "created_at": "ISO8601",

  "source": {
    "duration_ms": 1000,
    "fps": 30,
    "resolution": { "width": 1920, "height": 1080 }
  },

  "temporal_anchor": {
    "t_start": "MM:SS.ms",
    "t_center": "MM:SS.ms",
    "t_end": "MM:SS.ms"
  },

  "events": [
    {
      "id": "event_001",
      "type": "deterministic | chaos",
      "description": "string",
      "motion_vector": {
        "direction_deg": 0-360,
        "velocity": 0.0-1.0,
        "acceleration": number
      },
      "mass_momentum": {
        "estimated_mass": 0.0-10.0,
        "kinetic_energy": number,
        "momentum": number
      },
      "chaos_hint": {
        "material": "cloth | fluid | rigid | ...",
        "behavior": "soft_wave | scatter | ...",
        "constraint": "gravity | collision | ..."
      },
      "physics_validation": {
        "coherence_score": 0.0-1.0,
        "violations": [],
        "reconstructable": boolean
      }
    }
  ],

  "keyframes": [
    { "index": 0, "timestamp": "MM:SS.ms", "filename": "kf_000.jpg" },
    { "index": 1, "timestamp": "MM:SS.ms", "filename": "kf_001.jpg" },
    ...
  ],

  "chaos_predictions": [
    { "type": "fluid_splash", "params": {...} },
    { "type": "deformation_cascade", "params": {...} }
  ]
}
```

### 2.4 Manifest (Package Descriptor)

```json
{
  "format": "vam-rgb-package",
  "version": "2.0",
  "files": {
    "vam_rgb": "vam-rgb.png",
    "anchor": "anchor.json",
    "keyframes": ["keyframes/kf_000.jpg", ...]
  },
  "checksum": "sha256:...",
  "created_by": "VAM-RGB Encoder v2.0"
}
```

---

## 3. Closed Loop Pipeline

```
┌─────────────────────────────────────────────────────────────────┐
│                        ENCODE (v2.0)                            │
├─────────────────────────────────────────────────────────────────┤
│  [Original Video]                                               │
│        │                                                        │
│        ├──→ [Frame Extractor] ──→ Keyframe Images (7-30 fps)   │
│        │                                                        │
│        ├──→ [Optical Flow] ──→ VAM-RGB Image                   │
│        │                                                        │
│        └──→ [Analyzer] ──→ JSON Anchor                         │
│                                                                 │
│  Output: VAM-RGB Package (.vamrgb.zip)                         │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                      TRANSLATE (v1.8a)                          │
├─────────────────────────────────────────────────────────────────┤
│  [VAM-RGB Package]                                              │
│        │                                                        │
│        ├──→ [Runway Translator] ──→ Motion Brush + Keyframes   │
│        │                                                        │
│        ├──→ [Luma Translator] ──→ Keyframe Sequence + Easing   │
│        │                                                        │
│        └──→ [Kling Translator] ──→ ControlNet Depth + Images   │
│                                                                 │
│  Output: Platform-specific control package                      │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                       GENERATE                                  │
├─────────────────────────────────────────────────────────────────┤
│  [Video Gen AI: Runway / Luma / Kling / Sora]                  │
│        │                                                        │
│        ├──→ Physics constrained by VAM-RGB                     │
│        │                                                        │
│        └──→ Appearance constrained by Keyframes                │
│                                                                 │
│  Output: Generated Video                                        │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                        VERIFY                                   │
├─────────────────────────────────────────────────────────────────┤
│  [Generated Video] vs [Original Keyframes]                     │
│        │                                                        │
│        ├──→ Deterministic: 0.1% position error tolerance       │
│        │                                                        │
│        └──→ Chaos: Event occurrence match                      │
│                                                                 │
│  Output: Verification Report                                    │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. Verification Criteria

### 4.1 Deterministic Events (rigid body motion)

- **Metric:** Position error at keyframe timestamps
- **Threshold:** < 0.1% of frame diagonal
- **Method:** Optical flow comparison between generated and original keyframes

### 4.2 Chaos Events (cloth, fluid, hair)

- **Metric:** Event occurrence and timing
- **Threshold:** Event detected within ±2 frames of original
- **Method:**
  - Splash: Weber number threshold crossed
  - Fold: Deformation cascade initiated
  - Scatter: Particle dispersion detected

---

## 5. Implementation Phases

| Phase | Version | Scope | Status |
|-------|---------|-------|--------|
| 1 | v1.9 | Encoder (VAM-RGB only) | **Complete** |
| 2 | v2.0a | Keyframe extraction + packaging | Pending |
| 3 | v2.0b | Translator integration | Pending |
| 4 | v2.0c | Verification module | Pending |
| 5 | v2.0 | Full Closed Loop | Pending |

---

## 6. Open Questions

1. **Keyframe count:** 7 vs 15 vs 30? Trade-off between accuracy and file size.

2. **Keyframe selection:** Uniform interval or event-based?

3. **Video Gen AI API:** Each platform has different control interfaces.
   - Runway: Motion Brush (manual) vs API
   - Luma: Keyframe interpolation
   - Kling: ControlNet depth maps

4. **Verification automation:** How to compare generated vs original at scale?

5. **Edge cases:**
   - Camera motion (pan, zoom) vs object motion
   - Multiple objects with different physics
   - Occlusion handling

---

## 7. Security & Ethics Considerations

VAM-RGB is a physics encoding protocol. It is content-agnostic.

- **Encoding:** Extracts displacement vectors, not semantics
- **Decoding:** Requires keyframe images for appearance
- **Verification:** Compares physics, not content interpretation

The protocol does not bypass content moderation on Video Gen AI platforms.
Each platform applies its own filters to keyframe images.

---

## 8. Credits

- **HAASIY (unhaya):** Protocol design, testing methodology, philosophical framework
- **Claude OPUS:** v1.5-v1.9 implementation, physics validation, chaos prediction
- **Gemini 2.0 Flash:** Encoder mathematical specification, mass-momentum inference

---

## 9. Next Steps

1. Review this specification with all collaborators
2. Decide on keyframe extraction parameters
3. Implement v2.0a (packaging module)
4. Test with "safe" subjects (sports, dance, machinery)
5. Iterate based on Video Gen AI output quality

---

*"Compress the cause, teleport the effect, reconstruct the truth."*
— VAM-RGB Project, 2026-01-23
